/* Reset + base */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: #001427;
}



body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background-image: #000; /*url('tiles/back_0.webp'); /* adjust path as needed */
  background-size: cover; /* makes the image fill the screen */
  background-repeat: no-repeat;
  background-position: center;
  background-attachment: fixed; /* keeps it stationary while scrolling */
}



/* Shared camera window for each layer */
.layer-view {
  position: fixed;
  top: 0;
  left: 50%;
  width: 100vw;
  height: 24000px;
  transform: translateX(-50%);

}

/* Image stays centered and at natural width */
.layer-img{
  position:absolute;
  top:0; left:50%;
  transform:translate(-50%,0);
  height:var(--strip-h,1000px);   /* NEW – full strip height once JS sets it */
  image-rendering:crisp-edges;
  transition:transform 1.2s ease-out;
}




.layer-img {
  transition: none !important;
}






/* Z-index stack */
#back-view     { z-index: 0; }
#layer3-view   { z-index: 1; }
#layer4-view   { z-index: 3; }
#layer5-view   { z-index: 4; }
#layer6-view   { z-index: 5; }
#layer7-view   { z-index: 6; }
#layer8-view   { z-index: 7; }
#layer9-view   { z-index: 8; }
#view          { z-index: 10; }
#ui            { z-index: 100; }
#layer9p5-view { z-index: 10; }

/* UI */
#ui {
  position: fixed;
  top: 20px;
  left: 20px;
  background: rgba(255, 255, 255, 0.9);
  padding: 10px 15px;
  border-radius: 8px;
  font-family: sans-serif;
}



/* after JS flips the flag */
body.ready .parallax-layer{
  /*will-change:transform;*/
  /*transition:transform 1.2s ease-out;*/
  transition: none !important;
}

/*.parallax-layer{ will-change:auto; transition:none; }*/
.active          { will-change:transform; }   /* JS toggles this */
.content-hidden  { visibility:hidden; }       /* optional fade‑in */


/* generic wrapper – applies to every layer-view/parallax-layer combo */
.parallax-layer{
  position: fixed;
  top: 0;
  left: 50%;
  width: 100vw;
  height: 24000px;
  transform: translateX(-50%);   /* centre horizontally */
}

/* ─── depth ruler ────────────────────────────────────────── */
.layer-ruler {
  left: auto !important;
  right: 10% !important; /* adjust as needed */
  transform: none !important;
}


#ruler-view{ z-index:11; }      

#ruler-view{
  transform:none;     
}



/* depth‑dependent caustics overlay */
#underwater-img{
  position:absolute;
  left:50%;
  transform:translateX(-50%);   /* centre, so left/right crop symmetrically */

  top:1150px;                  /* vertical anchor */
  width:3400px;                /* ⬅︎ SAME width as your front tile         */
  max-width:none;              /* prevent it from shrinking on small screens */

  height:50px;                /* stretches from 100 → 500 px in JS */
  object-fit:fill;             /* vertical squish/expand, no horizontal scaling */
  object-position:top center;

  pointer-events:none;
}




#birds-view { z-index: 2; }


.bird-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  will-change: transform;
  pointer-events: none;
  animation: birdFlight var(--dur) linear forwards;
  transform-origin: center;
}



.bird {
  position: absolute;
  width: 30px;
  height: 30px;
  background: url('bird_up.png') center/contain no-repeat;
  opacity: 0.9;
  will-change: transform;
  transform-origin: center;
  transform: scale(var(--s, 1));
}


@keyframes birdFlight {
  0%   { transform: translateX(120vw) translateY(0); }
  10%  { transform: translateX(100vw) translateY(calc(var(--wave, 8px) * -1)); }
  20%  { transform: translateX(80vw)  translateY(0); }
  30%  { transform: translateX(60vw)  translateY(var(--wave, 8px)); }
  40%  { transform: translateX(40vw)  translateY(0); }
  50%  { transform: translateX(20vw)  translateY(calc(var(--wave, 8px) * -1)); }
  60%  { transform: translateX(0vw)   translateY(0); }
  70%  { transform: translateX(-20vw) translateY(var(--wave, 8px)); }
  80%  { transform: translateX(-40vw) translateY(0); }
  90%  { transform: translateX(-60vw) translateY(calc(var(--wave, 8px) * -1)); }
  100% { transform: translateX(-120vw) translateY(0); }
}




/* ─── bubble strip: world‑Y 900‑1500 px ───────────────────── 

#bubble-layer{
  position:fixed; left:0; width:100%;
  height:600px;                     
  pointer-events:none;
  overflow:hidden;                  
  z-index:9999;
}


.bubble{
  position:absolute; bottom:-60px; border-radius:50%;
  background:radial-gradient(circle at 35% 35%,
              rgba(255,255,255,.9) 0%,
              rgba(255,255,255,.55) 40%,
              rgba(255,255,255,.15) 80%, transparent 100%);
  box-shadow:0 0 12px rgba(255,255,255,.45);
  opacity:.9;
  will-change:transform;
  animation:bubbleRise var(--dur) linear forwards;
}


@keyframes bubbleRise{
  0%   {transform:translateY(0)        scale(0);}
  15%  {transform:translateY(-80px)    scale(1);}
  80%  {transform:translateY(calc(-100% + 80px)) scale(1);}
  92%  {transform:translateY(calc(-100% + 40px)) scale(1.5);}  
  100% {transform:translateY(-100%)    scale(0); opacity:0;}
}


/* ─── global freeze state ─────────────────────── */
body.paused *{
  animation-play-state: paused !important; /* stop key‑frame CSS */
  transition-duration: 0s   !important;   /* stop any swaying */
}



/* Mid‑screen caption */
#message-box{
  position:fixed;
  top:58%; left:50%; transform:translate(-50%,-50%);
  font:700 2rem/1.3 system-ui;
  text-align:center;  white-space:pre-line;
  color:#fff; text-shadow:0 0 8px #000;
  pointer-events:none; z-index:20;
  opacity:0; transition:opacity .3s ease;
}



/* Phones & emulators 
@media (hover: none) and (pointer: coarse), (max-width: 1000px) {
  #message-box {
    font:500 1.3rem/1.3 system-ui !important;
    top: 60% !important;                    
    transform: translate(-50%, -50%);
  }


}
*/




/* Blackout state for the foreground layer */
#front-view.front-blackout {
  background: #000;   /* solid black background */
}



/* ─── glitter layer ─────────────────────────────────────── */
#glitter-layer{
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 9;
  overflow: hidden;
  --topClip: 50%;
  clip-path: inset(var(--topClip) 0 0 0 round 0);
  opacity: 0;
  transition: clip-path .5s ease, opacity .5s ease;
}



.sparkle{
  position:absolute;
  width: var(--size, 2px);
  height: var(--size, 2px);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,.95) 0%, rgba(255,255,255,.2) 70%, rgba(255,255,255,0) 100%);
  filter: drop-shadow(0 0 2px rgba(255,255,255,.5));
  opacity: .0;                    /* animated in */
  animation: sparkleTwinkle var(--twinkleDur, 3.2s) ease-in-out infinite,
             sparkleDrift   var(--driftDur,   12s) linear infinite;
  animation-delay: var(--delay, 0s);
  will-change: transform, opacity;
}



@keyframes sparkleTwinkle{
  0%, 100% { opacity: 0.0; transform: scale(0.8); }
  10%      { opacity: 0.35; }
  50%      { opacity: 0.7;  transform: scale(1); }
  90%      { opacity: 0.35; }
}

@keyframes sparkleDrift{
  0%   { transform: translateY(0)      translateX(0); }
  100% { transform: translateY(-6vh)   translateX(2vw); }
}



/* optional: keep the stronger layer a hair brighter */
#glitter-layer-strong { z-index: 10; }  /* above the subtle layer’s 9 */


#glitter-layer-strong .sparkle{
  filter: drop-shadow(0 0 3px rgba(255,255,255,.6));
}


@media (max-width: 760px) {
  #message-box {
    /* use the font shorthand so it overrides any earlier font: ... rules */
    font: 600 1.5rem/1.0 system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif !important;
  }
}

/* Phones & emulators: smaller and lower mid-screen message */
@media (hover: none) and (pointer: coarse) and (max-width: 760px) {
  html {
    -webkit-text-size-adjust: 100% !important;
    text-size-adjust: 100% !important;
    font-size: 16px !important;
  }

  #message-box {
    top: 55% !important;                   
    transform: translate(-50%, -50%) !important;


    font-size: 1.0rem !important;         
    font-weight: 500 !important;
    line-height: 1.3 !important;
    font-family: Roboto, system-ui, -apple-system, "Segoe UI", Arial, sans-serif !important;
  }
}

